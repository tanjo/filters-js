(function(){var t;t=function(){function t(t,e,i){this.document=t,this.canvasId=e,this.dataURL=i,this.canvas=this.document.querySelector(this.canvasId),this.canvas&&(this.ctx=this.canvas.getContext("2d"),this.img=new Image,this.img.src=this.dataURL,this.canvas.width=this.img.width,this.canvas.height=this.img.height,this.ctx.drawImage(this.img,0,0,this.canvas.width,this.canvas.height))}return t.prototype.getImageData=function(){return this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height)},t.prototype.setImageData=function(t){this.ctx.putImageData(t,0,0)},t}(),"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.export=t:window.Canvas=t}).call(this),function(){var t;t=function(){function t(t){this.imageData=t}return t.red=0,t.green=1,t.blue=2,t.prototype.grayscale=function(t){var e,i,a,n,s,o,h,r,u;for(null==t&&(t=4),i=this.imageData.data,u=a=0,o=this.imageData.height;0<=o?a<=o:a>=o;u=0<=o?++a:--a)for(r=s=0,h=this.imageData.width;0<=h?s<=h:s>=h;r=0<=h?++s:--s)n=(r+u*this.imageData.width)*t,e=i[n]+i[n+1]+i[n+2]/3,i[n+this.red]=e,i[n+this.green]=e,i[n+this.blue]=e;return this.imageData.data=i,this.imageData},t}(),"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.export=t:window.Filters=t}.call(this),function(){var t;t=function(){function t(t,e){this.inputId=t,this.previewId=e}return t.prototype.preview=function(t){var e,i;document&&(e=document.querySelector(this.previewId),i=document.querySelector(this.inputId),i.onchange=function(){var a,n;a=i.files,n=new FileReader,n.onload=function(){document&&(e.src=n.result,t(n.result))},n.readAsDataURL(a[0])})},t}(),"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.export=t:window.IO=t}.call(this),function(){window.onload=function(){var t;t=new IO("#getfile","#preview"),t.preview(function(t){var e,i;return e=new Canvas(document,"#result",t),i=new Filters(e.getImageData()),e.setImageData(i.grayscale())})}}.call(this);
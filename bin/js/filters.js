(function(){var t;t=function(t){var e,a,n,i,d,r,h,o,c,g,m,f,l,u,I,w,v,p,E,s,D,y,B,L,k,x,M,_,b,R,z,U,A,C,F,j,q,G,H,J,K,N,O,P,Q,S;n=document.getElementById("result"),o=n.getContext("2d"),n.width=t.width,n.height=t.height,o.drawImage(t,0,0,t.width,t.height),t.style.display="none",_=o.getImageData(0,0,n.width,n.height),c=_.data,K=function(){var t,e;return window.open(n.toDataURL("image/png")),e=n.toDataURL("png"),t=document.createElement("a"),t.href=e,t.download="image.png",t.click()},N=document.getElementById("save"),N.disabled=null,N.addEventListener("click",K),A=function(){o.putImageData(_,0,0)},C=document.getElementById("original"),C.addEventListener("click",A),x=function(){var t,e,a,n,i,d;for(n=o.createImageData(_.width,_.height),i=n.data,e=a=0,d=c.length;a<d;e=a+=4)t=(c[e]+c[e+1]+c[e+2])/3,i[e]=t,i[e+1]=t,i[e+2]=t,i[e+3]=c[e+3];return o.putImageData(n,0,0),n},M=document.getElementById("grayscale"),M.addEventListener("click",x),g=function(){var t,e,a,n,i,d,r,h,g,m,f,l,u,I,w,v,p,E,s,D;for(I=o.createImageData(_.width,_.height),w=I.data,g=[-1,-1,0,-1,1,1,0,1,1],D=r=1,v=_.height-1;1<=v?r<v:r>v;D=1<=v?++r:--r)for(s=h=1,p=_.width-1;1<=p?h<p:h>p;s=1<=p?++h:--h){for(e=f=0;f<3;e=++f){for(d=4*(D*_.width+s)+e,E=0,i=l=-1;l<=1;i=++l)for(n=u=-1;u<=1;n=++u)m=3*(i+1)+(n+1),a=4*((D+i)*_.width+(s+n))+e,E+=g[m]*c[a];E>255&&(w[d]=255),E<0?w[d]=0:w[d]=E}t=4*(D*_.width+s)+3,w[t]=c[t]}o.putImageData(I,0,0)},m=document.getElementById("emboss"),m.addEventListener("click",g),O=function(){var t,e,a,n,i,d,r,h,g,m,f,l,u,I,w,v,p,E,s,D;for(I=o.createImageData(_.width,_.height),w=I.data,g=[0,-1,0,-1,5,-1,0,-1,0],D=r=1,v=_.height-1;1<=v?r<v:r>v;D=1<=v?++r:--r)for(s=h=1,p=_.width-1;1<=p?h<p:h>p;s=1<=p?++h:--h){for(e=f=0;f<3;e=++f){for(d=4*(D*_.width+s)+e,E=0,i=l=-1;l<=1;i=++l)for(n=u=-1;u<=1;n=++u)m=3*(i+1)+(n+1),a=4*((D+i)*_.width+(s+n))+e,E+=g[m]*c[a];E>255&&(w[d]=255),E<0?w[d]=0:w[d]=E}t=4*(D*_.width+s)+3,w[t]=c[t]}o.putImageData(I,0,0)},P=document.getElementById("sharp"),P.addEventListener("click",O),z=function(){var t,e,a,n,i;for(a=o.createImageData(_.width,_.height),n=a.data,t=e=0,i=c.length;e<i;t=e+=4)n[t]=255-c[t],n[t+1]=255-c[t+1],n[t+2]=255-c[t+2],n[t+3]=c[t+3];o.putImageData(a,0,0)},U=document.getElementById("negative"),U.addEventListener("click",z),i=function(){var t,e,a,n,i,d;for(t=function(t){var e;return e=1.5,e*(t-127)+127},n=o.createImageData(_.width,_.height),i=n.data,e=a=0,d=c.length;a<d;e=a+=4)i[e]=t(c[e]),i[e+1]=t(c[e+1]),i[e+2]=t(c[e+2]),i[e+3]=c[e+3];o.putImageData(n,0,0)},d=document.getElementById("contrast_enhancement"),d.addEventListener("click",i),r=function(){var t,e,a,n,i,d;for(t=function(t){var e;return e=.5,e*(t-127)+127},n=o.createImageData(_.width,_.height),i=n.data,e=a=0,d=c.length;a<d;e=a+=4)i[e]=t(c[e]),i[e+1]=t(c[e+1]),i[e+2]=t(c[e+2]),i[e+3]=c[e+3];o.putImageData(n,0,0)},h=document.getElementById("contrast_reduction"),h.addEventListener("click",r),L=function(){var t,e,a,n,i,d,r,h,g,m,f,l,u,I,w,v,p,E,s,D;for(I=o.createImageData(_.width,_.height),w=I.data,g=[.00390625,.015625,.0234375,.015625,.00390625,.015625,.0625,.09375,.0625,.015625,.0234375,.09375,.140625,.09375,.0234375,.015625,.0625,.09375,.0625,.015625,.00390625,.015625,.0234375,.015625,.00390625],D=r=2,v=_.height-2;2<=v?r<v:r>v;D=2<=v?++r:--r)for(s=h=2,p=_.width-2;2<=p?h<p:h>p;s=2<=p?++h:--h){for(e=f=0;f<3;e=++f){for(d=4*(D*_.width+s)+e,E=0,i=l=-2;l<=2;i=++l)for(n=u=-2;u<=2;n=++u)m=5*(i+2)+(n+2),a=4*((D+i)*_.width+(s+n))+e,E+=g[m]*c[a];E>255&&(w[d]=255),E<0?w[d]=0:w[d]=E}t=4*(D*_.width+s)+3,w[t]=c[t]}o.putImageData(I,0,0)},k=document.getElementById("gaussian_filter"),k.addEventListener("click",L),Q=function(){var t,e,a,n,i,d,r,h,g,m,f,l,u,I,w,v,p,E,s,D;for(I=o.createImageData(_.width,_.height),w=I.data,g=[-1,0,1,-2,0,2,-1,0,1],D=r=1,v=_.height-1;1<=v?r<v:r>v;D=1<=v?++r:--r)for(s=h=1,p=_.width-1;1<=p?h<p:h>p;s=1<=p?++h:--h){for(e=f=0;f<3;e=++f){for(d=4*(D*_.width+s)+e,E=0,i=l=-1;l<=1;i=++l)for(n=u=-1;u<=1;n=++u)m=3*(i+1)+(n+1),a=4*((D+i)*_.width+(s+n))+e,E+=g[m]*c[a];E>255&&(w[d]=255),E<0?w[d]=0:w[d]=E}t=4*(D*_.width+s)+3,w[t]=c[t]}o.putImageData(I,0,0)},S=document.getElementById("sobel_filter"),S.addEventListener("click",Q),b=function(){var t,e,a,n,i,d,r,h,g,m,f,l,u,I,w,v,p,E,s,D;for(I=o.createImageData(_.width,_.height),w=I.data,g=[1,1,1,1,-8,1,1,1,1],D=r=1,v=_.height-1;1<=v?r<v:r>v;D=1<=v?++r:--r)for(s=h=1,p=_.width-1;1<=p?h<p:h>p;s=1<=p?++h:--h){for(e=f=0;f<3;e=++f){for(d=4*(D*_.width+s)+e,E=0,i=l=-1;l<=1;i=++l)for(n=u=-1;u<=1;n=++u)m=3*(i+1)+(n+1),a=4*((D+i)*_.width+(s+n))+e,E+=g[m]*c[a];E>255&&(w[d]=255),E<0?w[d]=0:w[d]=E}t=4*(D*_.width+s)+3,w[t]=c[t]}o.putImageData(I,0,0)},R=document.getElementById("laplacian_filter"),R.addEventListener("click",b),q=function(){var t,e,a,n,i,d,r,h,g,m,f,l,u,I,w,v,p,E,s;for(f=o.createImageData(_.width,_.height),l=f.data,E=i=0,u=_.height-2;i<u;E=i+=5)for(v=d=0,I=_.width-2;d<I;v=d+=5){for(w=[0,0,0,0],t=0,a=r=0;r<=4;a=++r)for(e=h=0;h<=4;e=++h)s=E+a,p=v+e,p<_.width&&s<_.height&&(t+=1,n=4*(s*_.width+p),w[0]+=c[n],w[1]+=c[n+1],w[2]+=c[n+2],w[3]+=c[n+3]);for(a=g=0;g<=4;a=++g)for(e=m=0;m<=4;e=++m)s=E+a,p=v+e,p<_.width&&s<_.height&&(n=4*(s*_.width+p),l[n]=w[0]/t,l[n+1]=w[1]/t,l[n+2]=w[2]/t,l[n+3]=w[3]/t)}o.putImageData(f,0,0)},G=document.getElementById("pixelization"),G.addEventListener("click",q),H=function(){var t,e,a,n,i,d,r,h,g,m,f,l,u,I,w,v,p,E,s;for(f=o.createImageData(_.width,_.height),l=f.data,E=i=0,u=_.height-7;i<u;E=i+=15)for(v=d=0,I=_.width-7;d<I;v=d+=15){for(w=[0,0,0,0],t=0,a=r=0;r<=14;a=++r)for(e=h=0;h<=14;e=++h)s=E+a,p=v+e,p<_.width&&s<_.height&&(t+=1,n=4*(s*_.width+p),w[0]+=c[n],w[1]+=c[n+1],w[2]+=c[n+2],w[3]+=c[n+3]);for(a=g=0;g<=14;a=++g)for(e=m=0;m<=14;e=++m)s=E+a,p=v+e,p<_.width&&s<_.height&&(n=4*(s*_.width+p),l[n]=w[0]/t,l[n+1]=w[1]/t,l[n+2]=w[2]/t,l[n+3]=w[3]/t)}o.putImageData(f,0,0)},J=document.getElementById("pixelization_hard"),J.addEventListener("click",H),e=function(){var t,e,a,n,i,d;for(n=o.createImageData(_.width,_.height),i=n.data,t=127,e=a=0,d=c.length;a<d;e=a+=4)i[e]=c[e]>t?255:0,i[e+1]=c[e+1]>t?255:0,i[e+2]=c[e+2]>t?255:0,i[e+3]=c[e+3];o.putImageData(n,0,0)},a=document.getElementById("binarization"),a.addEventListener("click",e),F=function(){var t,e,a,n,i,d,r,h,c,g,m,f;for(h=x(),c=h.data,e=function(){var t,e;for(e=[],t=1;t<=256;t++)e.push(0);return e}(),a=n=0,g=c.length;n<g;a=n+=4)e[c[a]]+=1;for(r=h.width*h.height/2,t=0,f=0,a=i=255;i>=0;a=--i)if(t+=e[a],t>=r){f=a;break}for(a=d=0,m=c.length;d<m;a=d+=4)c[a]=c[a]>f?255:0,c[a+1]=c[a+1]>f?255:0,c[a+2]=c[a+2]>f?255:0,c[a+3]=c[a+3];o.putImageData(h,0,0)},j=document.getElementById("percentile_method"),j.addEventListener("click",F),f=function(){var t,e,a,n,i,d;for(n=o.createImageData(_.width,_.height),i=n.data,t=[.73412,.647019,.07914],e=a=0,d=c.length;a<d;e=a+=4)i[e]=255/(1+Math.exp(t[0]*(127-c[e]))),i[e+1]=255/(1+Math.exp(t[1]*(127-c[e+1]))),i[e+2]=255/(1+Math.exp(t[2]*(127-c[e+2]))),i[e+3]=c[e+3];return o.putImageData(n,0,0),n},l=document.getElementById("filter1"),l.addEventListener("click",f),u=function(){var t,e,a,n,i,d;for(n=o.createImageData(_.width,_.height),i=n.data,t=[.073412,.0647019,.07914],e=a=0,d=c.length;a<d;e=a+=4)i[e]=255/(1+Math.exp(t[0]*(127-c[e]))),i[e+1]=255/(1+Math.exp(t[1]*(127-c[e+1]))),i[e+2]=255/(1+Math.exp(t[2]*(127-c[e+2]))),i[e+3]=c[e+3];return o.putImageData(n,0,0),n},I=document.getElementById("filter2"),I.addEventListener("click",u),w=function(){var t,e,a,n,i,d;for(n=o.createImageData(_.width,_.height),i=n.data,t=[.9,0,.5],e=a=0,d=c.length;a<d;e=a+=4)i[e]=255/(1+Math.exp(t[0]*(127-c[e]))),i[e+1]=255/(1+Math.exp(t[1]*(127-c[e+1]))),i[e+2]=255/(1+Math.exp(t[2]*(127-c[e+2]))),i[e+3]=c[e+3];return o.putImageData(n,0,0),n},v=document.getElementById("filter3"),v.addEventListener("click",w),p=function(){var t,e,a,n,i,d;for(n=o.createImageData(_.width,_.height),i=n.data,t=[.373412,.347019,.3914],e=a=0,d=c.length;a<d;e=a+=4)i[e]=255/(1+Math.exp(t[0]*(127-c[e]))),i[e+1]=255/(1+Math.exp(t[1]*(127-c[e+1]))),i[e+2]=255/(1+Math.exp(t[2]*(127-c[e+2]))),i[e+3]=c[e+3];return o.putImageData(n,0,0),n},E=document.getElementById("filter4"),E.addEventListener("click",p),s=function(){var t,e,a,n,i,d;for(n=o.createImageData(_.width,_.height),i=n.data,t=[.73412,.647019,.7914],e=a=0,d=c.length;a<d;e=a+=4)i[e]=255/(1+Math.exp(t[0]*(127-c[e]))),i[e+1]=255/(1+Math.exp(t[1]*(127-c[e+1]))),i[e+2]=255/(1+Math.exp(t[2]*(127-c[e+2]))),i[e+3]=c[e+3];return o.putImageData(n,0,0),n},D=document.getElementById("filter5"),D.addEventListener("click",s),y=function(){var t,e,a,n,i,d;for(n=o.createImageData(_.width,_.height),i=n.data,t=[.93412,.647019,.0057914],e=a=0,d=c.length;a<d;e=a+=4)i[e]=255/(1+Math.exp(t[0]*(127-c[e]))),i[e+1]=255/(1+Math.exp(t[1]*(127-c[e+1]))),i[e+2]=255/(1+Math.exp(t[2]*(127-c[e+2]))),i[e+3]=c[e+3];return o.putImageData(n,0,0),n},B=document.getElementById("filter6"),B.addEventListener("click",y)},window.onload=function(){var e,a;e=document.getElementById("preview"),a=document.getElementById("getfile"),a.onchange=function(){var e,n;e=new Image,e.onload=function(){t(this)},n=new FileReader,n.onload=function(){return e.src=n.result},n.readAsDataURL(a.files[0])}}}).call(this);
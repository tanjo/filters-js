(function(){var e;e=function(e){var t,n,a,i,d,o;t=document.getElementById("result"),n=t.getContext("2d"),t.width=e.width,t.height=e.height,n.drawImage(e,0,0,e.width,e.height),e.style.display="none",o=n.getImageData(0,0,t.width,t.height),a=o.data,i=function(){var e,t,i,d;for(t=i=0,d=a.length;i<d;t=i+=4)e=(a[t]+a[t+1]+a[t+2])/3,a[t]=e,a[t+1]=e,a[t+2]=e;return n.putImageData(o,0,0)},d=document.getElementById("grayscale"),d.addEventListener("click",i)},window.onload=function(){var t,n;t=document.getElementById("preview"),n=document.getElementById("getfile"),n.onchange=function(){var t,a;t=new Image,t.onload=function(){e(this)},a=new FileReader,a.onload=function(){return t.src=a.result},a.readAsDataURL(n.files[0])}}}).call(this);
(function(){var t;t=function(t){var e,a,n,i,d,r,o,h,c,g,f,m,l,u,w,I,s,v,E,D,p,y,B,L,k,_,R,b;e=document.getElementById("result"),r=e.getContext("2d"),e.width=t.width,e.height=t.height,r.drawImage(t,0,0,t.width,t.height),t.style.display="none",u=r.getImageData(0,0,e.width,e.height),o=u.data,B=function(){var t,a;return window.open(e.toDataURL("image/png")),a=e.toDataURL("png"),t=document.createElement("a"),t.href=a,t.download="image.png",t.click()},L=document.getElementById("save"),L.disabled=null,L.addEventListener("click",B),E=function(){r.putImageData(u,0,0)},D=document.getElementById("original"),D.addEventListener("click",E),m=function(){var t,e,a,n,i,d;for(n=r.createImageData(u.width,u.height),i=n.data,e=a=0,d=o.length;a<d;e=a+=4)t=(o[e]+o[e+1]+o[e+2])/3,i[e]=t,i[e+1]=t,i[e+2]=t,i[e+3]=o[e+3];r.putImageData(n,0,0)},l=document.getElementById("grayscale"),l.addEventListener("click",m),h=function(){var t,e,a,n,i,d,h,c,g,f,m,l,w,I,s,v,E,D,p,y;for(I=r.createImageData(u.width,u.height),s=I.data,g=[-1,-1,0,-1,1,1,0,1,1],y=h=1,v=u.height-1;1<=v?h<v:h>v;y=1<=v?++h:--h)for(p=c=1,E=u.width-1;1<=E?c<E:c>E;p=1<=E?++c:--c){for(e=m=0;m<3;e=++m){for(d=4*(y*u.width+p)+e,D=0,i=l=-1;l<=1;i=++l)for(n=w=-1;w<=1;n=++w)f=3*(i+1)+(n+1),a=4*((y+i)*u.width+(p+n))+e,D+=g[f]*o[a];D>255&&(s[d]=255),D<0?s[d]=0:s[d]=D}t=4*(y*u.width+p)+3,s[t]=o[t]}r.putImageData(I,0,0)},c=document.getElementById("emboss"),c.addEventListener("click",h),k=function(){var t,e,a,n,i,d,h,c,g,f,m,l,w,I,s,v,E,D,p,y;for(I=r.createImageData(u.width,u.height),s=I.data,g=[0,-1,0,-1,5,-1,0,-1,0],y=h=1,v=u.height-1;1<=v?h<v:h>v;y=1<=v?++h:--h)for(p=c=1,E=u.width-1;1<=E?c<E:c>E;p=1<=E?++c:--c){for(e=m=0;m<3;e=++m){for(d=4*(y*u.width+p)+e,D=0,i=l=-1;l<=1;i=++l)for(n=w=-1;w<=1;n=++w)f=3*(i+1)+(n+1),a=4*((y+i)*u.width+(p+n))+e,D+=g[f]*o[a];D>255&&(s[d]=255),D<0?s[d]=0:s[d]=D}t=4*(y*u.width+p)+3,s[t]=o[t]}r.putImageData(I,0,0)},_=document.getElementById("sharp"),_.addEventListener("click",k),s=function(){var t,e,a,n,i;for(a=r.createImageData(u.width,u.height),n=a.data,t=e=0,i=o.length;e<i;t=e+=4)n[t]=255-o[t],n[t+1]=255-o[t+1],n[t+2]=255-o[t+2],n[t+3]=o[t+3];r.putImageData(a,0,0)},v=document.getElementById("negative"),v.addEventListener("click",s),a=function(){var t,e,a,n,i,d;for(t=function(t){var e;return e=1.5,e*(t-127)+127},n=r.createImageData(u.width,u.height),i=n.data,e=a=0,d=o.length;a<d;e=a+=4)i[e]=t(o[e]),i[e+1]=t(o[e+1]),i[e+2]=t(o[e+2]),i[e+3]=o[e+3];r.putImageData(n,0,0)},n=document.getElementById("contrast_enhancement"),n.addEventListener("click",a),i=function(){var t,e,a,n,i,d;for(t=function(t){var e;return e=.5,e*(t-127)+127},n=r.createImageData(u.width,u.height),i=n.data,e=a=0,d=o.length;a<d;e=a+=4)i[e]=t(o[e]),i[e+1]=t(o[e+1]),i[e+2]=t(o[e+2]),i[e+3]=o[e+3];r.putImageData(n,0,0)},d=document.getElementById("contrast_reduction"),d.addEventListener("click",i),g=function(){var t,e,a,n,i,d,h,c,g,f,m,l,w,I,s,v,E,D,p,y;for(I=r.createImageData(u.width,u.height),s=I.data,g=[.00390625,.015625,.0234375,.015625,.00390625,.015625,.0625,.09375,.0625,.015625,.0234375,.09375,.140625,.09375,.0234375,.015625,.0625,.09375,.0625,.015625,.00390625,.015625,.0234375,.015625,.00390625],y=h=2,v=u.height-2;2<=v?h<v:h>v;y=2<=v?++h:--h)for(p=c=2,E=u.width-2;2<=E?c<E:c>E;p=2<=E?++c:--c){for(e=m=0;m<3;e=++m){for(d=4*(y*u.width+p)+e,D=0,i=l=-2;l<=2;i=++l)for(n=w=-2;w<=2;n=++w)f=5*(i+2)+(n+2),a=4*((y+i)*u.width+(p+n))+e,D+=g[f]*o[a];D>255&&(s[d]=255),D<0?s[d]=0:s[d]=D}t=4*(y*u.width+p)+3,s[t]=o[t]}r.putImageData(I,0,0)},f=document.getElementById("gaussian_filter"),f.addEventListener("click",g),R=function(){var t,e,a,n,i,d,h,c,g,f,m,l,w,I,s,v,E,D,p,y;for(I=r.createImageData(u.width,u.height),s=I.data,g=[-1,0,1,-2,0,2,-1,0,1],y=h=1,v=u.height-1;1<=v?h<v:h>v;y=1<=v?++h:--h)for(p=c=1,E=u.width-1;1<=E?c<E:c>E;p=1<=E?++c:--c){for(e=m=0;m<3;e=++m){for(d=4*(y*u.width+p)+e,D=0,i=l=-1;l<=1;i=++l)for(n=w=-1;w<=1;n=++w)f=3*(i+1)+(n+1),a=4*((y+i)*u.width+(p+n))+e,D+=g[f]*o[a];D>255&&(s[d]=255),D<0?s[d]=0:s[d]=D}t=4*(y*u.width+p)+3,s[t]=o[t]}r.putImageData(I,0,0)},b=document.getElementById("sobel_filter"),b.addEventListener("click",R),w=function(){var t,e,a,n,i,d,h,c,g,f,m,l,w,I,s,v,E,D,p,y;for(I=r.createImageData(u.width,u.height),s=I.data,g=[1,1,1,1,-8,1,1,1,1],y=h=1,v=u.height-1;1<=v?h<v:h>v;y=1<=v?++h:--h)for(p=c=1,E=u.width-1;1<=E?c<E:c>E;p=1<=E?++c:--c){for(e=m=0;m<3;e=++m){for(d=4*(y*u.width+p)+e,D=0,i=l=-1;l<=1;i=++l)for(n=w=-1;w<=1;n=++w)f=3*(i+1)+(n+1),a=4*((y+i)*u.width+(p+n))+e,D+=g[f]*o[a];D>255&&(s[d]=255),D<0?s[d]=0:s[d]=D}t=4*(y*u.width+p)+3,s[t]=o[t]}r.putImageData(I,0,0)},I=document.getElementById("laplacian_filter"),I.addEventListener("click",w),p=function(){var t,e,a,n,i,d,h,c,g,f,m,l,w,I,s,v,E,D,p;for(m=r.createImageData(u.width,u.height),l=m.data,D=i=0,w=u.height-2;i<w;D=i+=5)for(v=d=0,I=u.width-2;d<I;v=d+=5){for(s=[0,0,0,0],t=0,a=h=0;h<=4;a=++h)for(e=c=0;c<=4;e=++c)p=D+a,E=v+e,E<u.width&&p<u.height&&(t+=1,n=4*(p*u.width+E),s[0]+=o[n],s[1]+=o[n+1],s[2]+=o[n+2],s[3]+=o[n+3]);for(a=g=0;g<=4;a=++g)for(e=f=0;f<=4;e=++f)p=D+a,E=v+e,E<u.width&&p<u.height&&(n=4*(p*u.width+E),l[n]=s[0]/t,l[n+1]=s[1]/t,l[n+2]=s[2]/t,l[n+3]=s[3]/t)}r.putImageData(m,0,0)},y=document.getElementById("pixelization"),y.addEventListener("click",p)},window.onload=function(){var e,a;e=document.getElementById("preview"),a=document.getElementById("getfile"),a.onchange=function(){var e,n;e=new Image,e.onload=function(){t(this)},n=new FileReader,n.onload=function(){return e.src=n.result},n.readAsDataURL(a.files[0])}}}).call(this);